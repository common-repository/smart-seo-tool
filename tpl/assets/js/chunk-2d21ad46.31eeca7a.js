(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ad46"],{bcd3:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[a("div",{staticClass:"wbs-main"},[t.isLoaded?a("div",{staticClass:"sc-body"},[a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"w8em"},[t._v("类型")]),a("td",{staticClass:"info"},[a("el-radio-group",{model:{value:t.r.code,callback:function(a){t.$set(t.r,"code",a)},expression:"r.code"}},t._l({301:"301永久重定向",302:"302临时重定向"},(function(e,r){return a("el-radio",{key:"type-"+r,attrs:{label:r}},[t._v(t._s(e))])})),1)],1)]),a("tr",[a("th",[t._v("源URL")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.r.from_url,expression:"r.from_url"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.r.from_url},on:{input:function(a){a.target.composing||t.$set(t.r,"from_url",a.target.value)}}}),a("div",{staticClass:"mt"},[a("span",{staticClass:"wk"},[t._v("URL参数匹配:")]),a("el-select",{staticClass:"w30 ml",attrs:{clearable:"",placeholder:"请选择",size:"small"},model:{value:t.r.param,callback:function(a){t.$set(t.r,"param",a)},expression:"r.param"}},t._l({match:"全匹配",ignore:"忽略参数",ignore2target:"忽略参数且参数跟随到目标Url"},(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)])]),a("tr",[a("th",[t._v("目标URL")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.r.to_url,expression:"r.to_url"}],staticClass:"wbs-input",attrs:{type:"text"},domProps:{value:t.r.to_url},on:{input:function(a){a.target.composing||t.$set(t.r,"to_url",a.target.value)}}})])])])])]):t._e(),a("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),a("div",{staticClass:"wbs-footer"},[a("div",{staticClass:"wbsf-inner"},[a("el-button",{attrs:{type:"info",plain:""},on:{click:function(a){return t.back()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.updateData()}}},[t._v(" 保存 ")])],1)])])},s=[],o={name:"UrlRedirectDetail",components:{},data(){const t=this;return{formChanged:0,isLoaded:1,is_pro:t.$cnf.is_pro,r:{id:0,code:301,from_url:"",param:"match",to_url:""}}},created(){const t=this;t.getData()},methods:{back(){this.$router.back()},updateData(){const t=this,a=t.r;a.from_url=a.from_url.replace(wb_cnf.home_url,""),/^https?:\/\//.test(a.from_url)?t.$wbui.toast("源URL需本站URL"):(/^\//.test(a.from_url)||(a.from_url="/"+a.from_url),a.to_url=a.to_url.replace(wb_cnf.home_url,""),/^https?:\/\//.test(a.to_url)||/^\//.test(a.to_url)||(a.to_url="/"+a.to_url),a.from_url!=a.to_url?t.$api.saveData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"redirection-save",r:t.r}).then(a=>{a.code?t.$wbui.toast("保存失败，"+a.desc):(t.$wbui.toast("保存成功"),t.r.id||(t.r.id=a.data),t.$router.back())}):t.$wbui.toast("源URL与目标URL不能相同"))},getData(){const t=this,a=1*t.$route.query.id;t.isLoaded=!0,a<1||t.$api.getData({action:t.$cnf.action.act,op:"redirection-detail",id:a}).then(a=>{t.r=a.data})}}},i=o,l=e("2877"),n=Object(l["a"])(i,r,s,!1,null,null,null);a["default"]=n.exports}}]);