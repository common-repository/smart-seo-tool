(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aaf37f9"],{"0a55":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t._self._c;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[o("div",{staticClass:"wbs-main"},[t.isLoaded?o("div",[t._m(0),o("table",{staticClass:"wbs-form-table"},[o("tbody",[o("tr",[o("th",{staticClass:"row w8em"},[t._v("索引")]),o("td",{staticClass:"info"},[o("el-radio-group",{on:{change:function(o){return t.set_noindex(o,"post")}},model:{value:t.post_noindex,callback:function(o){t.post_noindex=o},expression:"post_noindex"}},[o("el-radio",{attrs:{label:0}},[t._v("索引")]),o("el-radio",{attrs:{label:1}},[t._v("不索引")])],1)],1)]),o("tr",[o("th",{staticClass:"row w8em"},[t._v("跟随")]),o("td",{staticClass:"info"},[o("el-radio-group",{on:{change:function(o){return t.set_nofollow(o,"post")}},model:{value:t.post_nofollow,callback:function(o){t.post_nofollow=o},expression:"post_nofollow"}},[o("el-radio",{attrs:{label:0}},[t._v("跟随")]),o("el-radio",{attrs:{label:1}},[t._v("不跟随")])],1)],1)])])]),o("wbs-tdk-setter",{attrs:{cnf:{separator:t.opt.separator,titleVariables:t.title_variables.post,kwMode:1,post_type:"post"},opt:t.opt.post},on:{change:function(o){t.opt.post=o}}}),t._m(1),o("table",{staticClass:"wbs-form-table"},[o("tbody",[o("tr",[o("th",{staticClass:"row w8em"},[t._v("索引")]),o("td",{staticClass:"info"},[o("el-radio-group",{on:{change:function(o){return t.set_noindex(o,"page")}},model:{value:t.page_noindex,callback:function(o){t.page_noindex=o},expression:"page_noindex"}},[o("el-radio",{attrs:{label:0}},[t._v("索引")]),o("el-radio",{attrs:{label:1}},[t._v("不索引")])],1)],1)]),o("tr",[o("th",{staticClass:"row w8em"},[t._v("跟随")]),o("td",{staticClass:"info"},[o("el-radio-group",{on:{change:function(o){return t.set_nofollow(o,"page")}},model:{value:t.page_nofollow,callback:function(o){t.page_nofollow=o},expression:"page_nofollow"}},[o("el-radio",{attrs:{label:0}},[t._v("跟随")]),o("el-radio",{attrs:{label:1}},[t._v("不跟随")])],1)],1)])])]),o("wbs-tdk-setter",{attrs:{cnf:{separator:t.opt.separator,titleVariables:t.title_variables.page,kwMode:1,post_type:"page"},opt:t.opt.page},on:{change:function(o){t.opt.page=o}}}),o("wbs-var-doc",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}]}),o("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1):t._e()]),t.$cnf.is_pro?t._e():o("wbs-more-sources",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}]}),o("wbs-ctrl-bar",{on:{submit:t.updateData}})],1)},s=[function(){var t=this,o=t._self._c;return o("h3",{staticClass:"sc-title-sub"},[o("span",[t._v("文章页")])])},function(){var t=this,o=t._self._c;return o("h3",{staticClass:"sc-title-sub"},[o("span",[t._v("独立页面")])])}],n=e("46d5"),i=e("6bd9"),l={name:"TdkDetail",components:{"wbs-tdk-setter":n["a"],"wbs-var-doc":i["a"]},data(){const t=this;return{formChanged:0,isLoaded:!1,is_pro:t.$cnf.is_pro,opt:{},post_noindex:0,page_noindex:0,post_nofollow:0,page_nofollow:0,separator:[],title_variables:{}}},created(){const t=this;t.getData()},methods:{set_noindex(t,o){const e=this;let a=e.opt.noindex.indexOf(o);t&&a<0?e.opt.noindex.push(o):!t&&a>-1&&e.opt.noindex.splice(a,1)},set_nofollow(t,o){const e=this;let a=e.opt.nofollow.indexOf(o);t&&a<0?e.opt.nofollow.push(o):!t&&a>-1&&e.opt.nofollow.splice(a,1)},getData(){const t=this;t.$api.getData({action:t.$cnf.action.act,op:"get_options",key:"tdk",type:"post,page"}).then(o=>{const e=o.data;t.opt=e.opt,t.opt.nofollow||(t.opt.nofollow=[]),t.opt.noindex&&(t.opt.noindex.indexOf("page")>-1&&(t.page_noindex=1),t.opt.noindex.indexOf("post")>-1&&(t.post_noindex=1)),t.opt.nofollow&&(t.opt.nofollow.indexOf("page")>-1&&(t.page_nofollow=1),t.opt.nofollow.indexOf("post")>-1&&(t.post_nofollow=1)),t.separator=e.separator,t.title_variables=e.title_variables,t.isLoaded=!0})},updateData(t){const o=this;o.$api.saveData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:o.$cnf.action.act,op:"update_options",opt:o.opt,key:"tdk",type:"detail"}).then(e=>{o.$wbui.toast("设置保存成功"),o.formChanged=1,t&&t()})}},computed:{},watch:{opt:{handler(){this.formChanged++},deep:!0}},beforeRouteLeave(t,o,e){const a=this;a.formChanged>1?a.$wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes(){return e(!1),a.updateData(()=>{e()}),!1},no(){return e(),!1}}):e()}},r=l,d=e("2877"),p=Object(d["a"])(r,a,s,!1,null,null,null);o["default"]=p.exports},"6bd9":function(t,o,e){"use strict";var a=function(){var t=this,o=t._self._c;return o("table",{staticClass:"wbs-form-table mt"},[o("tbody",[o("tr",[o("th",{staticClass:"row w8em"}),o("td",[o("el-button",{attrs:{size:"medium",type:"primary",plain:"",icon:"el-icon-collection"},on:{click:function(o){t.unfold=!t.unfold}}},[t._v("变量注释")]),o("table",{directives:[{name:"show",rawName:"v-show",value:t.unfold,expression:"unfold"}],staticClass:"wbs-table wbs-table-doc table-hover mt"},[t._m(0),o("tbody",t._l(t.doc_items,(function(e){return o("tr",{key:e.name},[o("td",[o("b",[t._v(t._s(e.name))])]),o("td",{domProps:{innerHTML:t._s(e.desc)}})])})),0)])],1)])])])},s=[function(){var t=this,o=t._self._c;return o("thead",[o("tr",[o("td",[t._v("变量名称")]),o("td",[t._v("变量说明")])])])}],n={name:"comVariableDoc",props:{type:{type:String,value:""}},data(){return{doc_items:[],unfold:!1}},created(){const t=this,o="WB_SST_DOC"+(t.type?"_"+t.type:"");let e=localStorage.getItem(o);e=e?JSON.parse(e):null,e&&e.ver==t.$cnf.pd_version?t.doc_items=e.data:t.$api.getData({action:t.$cnf.action.act,op:"doc",type:t.type?t.type:""}).then(e=>{t.doc_items=e["data"],localStorage.setItem(o,JSON.stringify({ver:t.$cnf.pd_version,data:e["data"]}))})}},i=n,l=e("2877"),r=Object(l["a"])(i,a,s,!1,null,null,null);o["a"]=r.exports}}]);