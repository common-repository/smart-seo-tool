(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22320715"],{"46d5":function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wbs-title-format"},[e("table",{staticClass:"wbs-form-table"},[e("tbody",[e("tr",[e("th",{staticClass:"row w8em"},[t._v("标题")]),e("td",[e("div",{staticClass:"input-with-count"},[e("wbs-title-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[0]},on:{change:t.title_handler}}),e("span",{staticClass:"count"})],1),e("p",{staticClass:"description"},[t._v("一般不超过30个中文字符。")])])]),e("tr",[e("th",[t._v("关键词")]),e("td",[t.cnf.kwMode?e("div",{staticClass:"input-with-count"},[e("wbs-kw-format",{attrs:{cnf:{dropdownItems:t.cnf.titleVariables,variableOnly:!0},opt:t.tdk[1]},on:{change:t.kw_handler}})],1):e("label",{staticClass:"input-with-count wb-tags-module"},[e("wbs-tags-module",{attrs:{tags:t.tdk[1]},on:{"set-tags":t.kw_cpt}})],1),e("p",{staticClass:"description"},[t._v("建议3-5个为宜，切勿进行关键词堆叠。")])])]),e("tr",[e("th",[t._v("描述")]),e("td",[e("div",{staticClass:"input-with-count"},[e("wbs-description-format",{staticClass:"wbs-input-textarea",attrs:{cnf:{dropdownItems:t.cnf.titleVariables},opt:t.tdk[2]},on:{change:t.desc_handler}})],1),e("p",{staticClass:"description"},[t._v("不超100个中文字符，建议50-100字为宜。")])])]),""!=t.tdk[0]||""!=t.tdk[2]?e("tr",[e("th",[t._v("预览")]),e("td",[e("div",{staticClass:"preview-box"},[e("div",{staticClass:"pvb-display"},[e("a",{staticClass:"preview-title"},[t._v(t._s(t.title_preview))]),e("p",{staticClass:"preview-desc"},[t._v(t._s(t.desc_preview))]),e("p",{staticClass:"preview-link"},[t._v(t._s(t.home_url("")))])]),e("div",{staticClass:"pvb-ft"},[t._v("* 搜索引擎收录结果展示预览")])])])]):t._e()])])])},s=[],a=n("9cda"),l=function(){var t=this,e=t._self._c;return e("label",{staticClass:"wb-tags-ctrl"},[e("div",{staticClass:"tag-items"},t._l(t.taglist,(function(n,i){return t.taglist.length?e("div",{staticClass:"tag-item"},[e("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(n))}}),e("a",{staticClass:"del",attrs:{"data-del-val":n},on:{click:function(e){return t.delItem(i)}}})]):t._e()})),0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:"输入选项值, 回车确认 *"},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}})])},c=[],r={name:"wbsTags",props:{tags:String,format:String},data(){return{cur_input:"",taglist:[],keycode:null}},created(){this.taglist=this.tags?this.tags.split(","):[]},methods:{wbTagInput(t){const e=this,n=t.keyCode;13===n&&e.wbTagPush()},wbTagPush(t){const e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(e.$wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist.join(",")),e.cur_input="",!1))},delItem(t){const e=this;e.$wbui.confirm("确认删除该选项？",()=>{e.taglist.splice(t,1),e.$emit("set-tags",e.taglist.join(",")),e.$wbui.toast("已移除")})},displayFormat(t){const e=t.split(":");return e.length>1?e[1]+'<em class="wk">(别名:'+e[0]+")</em>":t}},computed:{}},o=r,u=n("2877"),d=Object(u["a"])(o,l,c,!1,null,null,null),p=d.exports,_={name:"TdkSetter",props:{opt:{type:Array,value:[]},cnf:{type:Object,value:{separator:"",titleVariables:{},kwMode:0,post_type:""}}},components:{"wbs-title-format":a["a"],"wbs-kw-format":a["a"],"wbs-description-format":a["a"],"wbs-tags-module":p},data(){const t=this;return{tdk:t.opt||["","",""],title_preview:"",desc_preview:"",variables_keys_title:Object.keys(t.cnf.titleVariables)}},mounted(){const t=this;t.title_preview=t.preview_handler(t.opt[0],t.cnf.titleVariables),t.desc_preview=t.preview_handler(t.opt[2],t.cnf.titleVariables)},methods:{title_handler(t){const e=this;e.tdk[0]=t,e.title_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},kw_handler(t){const e=this;t=t.replace(/(%\w+%)/g,",$1,"),t=t.replace(/,,/g,","),t=t.replace(/^,/g,""),t=t.replace(/,$/gi,""),e.tdk[1]=t,e.$emit("change",e.tdk)},kw_cpt(t){const e=this;e.tdk[1]=t,e.$emit("change",e.tdk)},desc_handler(t){const e=this;e.tdk[2]=t,e.desc_preview=e.preview_handler(t,e.cnf.titleVariables),e.$emit("change",e.tdk)},preview_handler(t="",e={}){const n=this,i=Object.keys(e);if(""==t)return"";if(i.forEach((function(n){if(t.indexOf(n)<0)return!1;t=t.replace(new RegExp(n,"g")," "+e[n]+" ")})),n.cnf.post_type){let e=n.cnf.post_type,i=wb_cnf.seo_demo||{post:{},page:{}},a=i[e]||{},l={"文章标题":"post_title","作者":"author_name","直属分类":"cat_name","父级分类":"parent_cat","标签":"post_tag","摘要":"description"};for(var s in l)t=t.replace(new RegExp(s,"g"),a[l[s]])}return t=t.replace(new RegExp("分隔符","g"),n.cnf.separator),t=t.replace(new RegExp("站点标题","g"),n.$cnf.site_info.site_title),t=t.replace(new RegExp("站点副标题","g"),n.$cnf.site_info.site_subtitle),t},home_url(t=""){const e=this;return e.$cnf.home_url+t}},watch:{opt:{handler(t){const e=this;e.tdk=t}}}},m=_,v=Object(u["a"])(m,i,s,!1,null,null,null);e["a"]=v.exports},"9cda":function(t,e,n){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{ref:"wp",staticClass:"wbs-tag-format"},[t.cnf.variableOnly?t._e():e("span",{staticClass:"el-dropdown-link",on:{click:function(e){return e.stopPropagation(),t.inset_item()}}},[e("i",{staticClass:"el-icon-circle-plus el-icon--right"}),e("span",{staticClass:"label-inset-var"},[t._v("插入变量")])]),e("div",{staticClass:"input-box",class:{"is-focus":t.isFocus}},[t.cnf.variableOnly?e("div",[t._l(t.item_list,(function(n,i){return e("tag-variable-item",{key:i,ref:"tagItem",refInFor:!0,attrs:{opt:n,cnf:t.cnf},on:{del:function(e){return t.del_item(i,e)}}})})),e("span",{staticClass:"input-item-btn",on:{click:function(e){return e.stopPropagation(),t.inset_tag()}}},[e("i",{staticClass:"el-icon-circle-plus el-icon--right"}),e("span",{staticClass:"label-inset-var"},[t._v("插入变量")])])],2):e("div",t._l(t.item_list,(function(n,i){return e("tag-item",{key:i,ref:"tagItem",refInFor:!0,class:{"last-item":i==t.items.length-1},attrs:{opt:n,cnf:t.cnf},on:{focus:function(e){return t.get_focus(i)},blur:t.blur_handler,change:function(e){return t.tag_change(i,e)},add:function(e){return t.inset_item(i)},del:function(e){return t.del_item(i,e)},"active-next":function(e){return t.active_next(i,e)}}})})),1),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.dropdown_active,expression:"dropdown_active"}],ref:"dropdownList",staticClass:"el-dropdown-menu el-popper"},t._l(t.cnf.dropdownItems,(function(n,i){return e("li",{key:i,staticClass:"el-dropdown-menu__item",on:{click:function(e){return t.select_dropdown_value(n,i)}}},[t._v(" "+t._s(n)+" ")])})),0),t.cnf.variableOnly?t._e():e("div",{staticClass:"inner-mask",on:{click:t.focus_wp}})])])},s=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ib input-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib.apply(null,arguments)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),e("i",{staticClass:"del",on:{click:t.del_tag_ib}}),t.locked?t._e():e("span",{staticClass:"between-tag-input",attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])},l=[],c={name:"comTagItem",props:{opt:""},data(){const t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created(){},mounted(){const t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action(t){const e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown(t){const e=this;let n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter(t){return t.preventDefault(),!1},div_input(t){const e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input(t){const e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select(t){const e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib(t){this.$emit("del",0)}},computed:{locked(){return this.opt.type}}},r=c,o=n("2877"),u=Object(o["a"])(r,a,l,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ib tag-item",class:t.locked?"tag-ib":"",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.del_tag_ib.apply(null,arguments)},input:t.tag_wp_input,click:function(e){return e.stopPropagation(),t.$emit("focus")}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.locked,expression:"locked"}],ref:"displayValue",staticClass:"display-value",on:{click:t.select}},[t._v(t._s(t.opt.name))]),e("i",{staticClass:"del",on:{click:t.del_tag_ib}}),t.locked?t._e():e("span",{staticClass:"between-tag-readonly",domProps:{innerHTML:t._s(t.opt.value)},on:{blur:function(e){return t.input_action(e)},focus:function(e){return t.$emit("focus")},input:function(e){return t.div_input(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.div_keydown(e)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.div_enter(e)}}})])},_=[],m={name:"comTagItemVariableOnly",props:{opt:""},data(){const t=this;return{tag_ib_html:"",value:t.opt.value,del_action:0}},created(){},mounted(){const t=this;t.tag_ib_html=t.$refs.displayValue.outerHTML},methods:{input_action(t){const e=this,n=t.target.innerText;e.opt.value=n,e.$emit("change",{name:n,value:n,type:0}),e.$emit("blur",n)},div_keydown(t){const e=this;let n=e.value;""===n&&(e.del_action>0?(e.$emit("del",-1),e.del_action=0):(e.del_action++,e.$emit("change",{name:"",value:"",type:0})))},div_enter(t){return t.preventDefault(),!1},div_input(t){const e=this,n=t.target.innerText;if("%"==n)return e.$emit("add",!0),!1;n.replace(/%/,"&#x25;"),e.value=t.target.innerText},tag_wp_input(t){const e=this;e.locked&&(t.target.innerHTML=e.tag_ib_html,e.$emit("active-next",t.data))},select(t){const e=window.getSelection(),n=document.createRange();e.removeAllRanges(),n.selectNodeContents(t.currentTarget),e.addRange(n)},del_tag_ib(t){this.$emit("del",0)}},computed:{locked(){return this.opt.type}}},v=m,f=Object(o["a"])(v,p,_,!1,null,null,null),g=f.exports,h={name:"WBTagFormat",props:{opt:String,cnf:{type:Object,value:{dropdownItems:{},variableOnly:!1}}},components:{"tag-item":d,"tag-variable-item":g},data(){const t=this;let e;return e=t.cnf.variableOnly?t.opt.replace(/,/g,""):t.opt,{empty_item:{name:"",value:"",type:0},cur_value:e,cur_index:0,had_add:0,dropdown_active:0,isFocus:0,cnf_keys:Object.keys(t.cnf.dropdownItems),item_list:[]}},created(){},mounted(){const t=this;t.$nextTick(()=>{t.cur_index=t.item_list.length-1}),document.addEventListener("click",(function(e){t.dropdown_active&&t.hide_dropdown()}))},methods:{tag_change(t,e){const n=this;let i=n.items,s="";null!=e&&(i[t]=e.value,i.forEach((function(t,e,n){t&&(s+=t)})),n.cur_value=s)},inset_item(t){const e=this;let n=null!=t?t:e.cur_index;""!==e.item_list[n].value&&(n+=1,e.items.splice(n,0,"%"),e.item_list.splice(n,0,e.empty_item),e.cur_index=n),e.item_list[n].value="%",e.active_dropdown(n)},inset_tag(t){const e=this;let n=null!=t?t:e.cur_index;e.item_list[n].value="",e.active_dropdown(n)},del_item(t,e){const n=this;let i="",s=n.items,a=t+e;a=a>=0?a:0,n.item_list[a].type&&(s.forEach((function(t,e){a!==e&&(i+=t)})),n.cur_value=i,n.cur_index=a-1,n.set_focus(a))},active_dropdown(t){const e=this,n=null!==t?t:e.cur_index,i=e.$refs.tagItem.length-1;let s=n>i?i:n;const a=e.$refs.tagItem[s].$el.offsetLeft;e.dropdown_active=!0,e.$refs.dropdownList.style.left=a+"px",e.$refs.wp.classList.add("active-dropdown")},hide_dropdown(){const t=this;t.dropdown_active=!1,t.$refs.dropdownList.style.left="",t.$refs.wp.classList.remove("active-dropdown")},select_dropdown_value(t,e){const n=this;let i="",s=n.items,a=n.cur_index;s[a]=e,s.forEach((function(t,e){i+=t})),n.cur_value=i,n.hide_dropdown(),n.$nextTick(()=>{const t=n.items.length;n.cur_index=t-1,n.set_focus(t)})},active_next(t,e){const n=this,i=t+1,s=n.$refs.tagItem[i].$el.querySelector(".between-tag-input"),a=s.innerText;s.innerText=e+a,s.focus();const l=window.getSelection();l.removeAllRanges();const c=document.createRange();c.setStart(s,1),l.addRange(c)},set_focus(t){const e=this,n=t>1?t-1:0,i=e.$refs.tagItem[n].$el,s=i.querySelector(".between-tag-input"),a=window.getSelection(),l=document.createRange();if(s){let t=s.innerText.length;const e=t?s.firstChild:s;a.removeAllRanges(),l.setStart(e,t),l.setEnd(e,t)}else{const t=i.querySelector(".display-value");a.removeAllRanges(),t&&l.selectNode(t)}return a.addRange(l),!1},get_focus(t){this.cur_index=t,this.isFocus=!0},focus_wp(){const t=this,e=t.$refs.tagItem.length;t.cur_index=e-1,t.set_focus(e),t.isFocus=!0},blur_handler(t){const e=this;e.isFocus=!1}},computed:{items(){const t=this;let e=t.cur_value;return e?(t.cnf.variableOnly&&(e=e.replace(/,/g,"")),e=e.replace(/(%\w+%)/g,"##$1##"),e=e.replace(/^##/g,""),e.split("##")):[]}},watch:{cur_value:{handler(t){const e=this,n=e.cnf.variableOnly?t.replace(/,/g,""):t;let i=n;i=i.replace(/(%\w+%)/g,"##$1##"),i=i.replace(/^##/g,"");const s=[{name:"",value:"",type:0}],a=n?i.split("##"):[];a.forEach((function(t,n){const i=e.cnf_keys.indexOf(t)>-1?1:0;s[n]={name:i?e.cnf.dropdownItems[t]:t,value:t,type:i}})),s.slice(-1)[0].type&&s.push(e.empty_item),e.item_list=s,e.$emit("change",n)},immediate:!0},opt:{handler(t){const e=this;e.cur_value=t}}}},w=h,k=Object(o["a"])(w,i,s,!1,null,null,null);e["a"]=k.exports}}]);