(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c7d7e78"],{8856:function(t,a,e){"use strict";var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"wbs-custom-links"},[a("label",{staticClass:"wb-links-input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wbs-input wbs-input-short",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(a){a.target.composing||(t.cur_input=a.target.value)}}}),a("a",{staticClass:"ml link",on:{click:t.wbTagPush}},[t._v("添加 +")])]),t.items.length?a("div",{staticClass:"links-items"},t._l(t.items,(function(e,s){return a("div",{key:s,staticClass:"link-item"},[a("span",{staticClass:"item-value",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("span",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(a){return t.delItem(s)}}},[a("i",{staticClass:"el-icon-delete"})])])})),0):t._e()])},i=[],n={name:"comCustomLinks",props:{items:Array,mode:Number,placeholder:String},data(){return{cur_input:"",taglist:[],keycode:null}},created(){this.taglist=this.items?this.items:[]},methods:{wbTagInput(t){var a=this,e=t.keyCode;188===e&&(a.cur_input=a.cur_input.replace(/(^,)|(,$)/,"")),13===e&&(a.wbTagPush(),event.stopPropagation())},wbTagPush(t){var a=this;return""!=a.cur_input&&(a.taglist.indexOf(a.cur_input.trim())>-1?(a.$wbui.toast("已存在"),a.cur_input="",!1):(a.taglist.push(a.cur_input),a.$emit("set-tags",a.taglist),a.cur_input="",!1))},delItem(t){var a=this;a.$wbui.confirm("确认删除？",()=>{a.taglist.splice(t,1),a.$emit("set-tags",a.taglist),a.$wbui.toast("已移除")})},displayFormat(t){return t}}},l=n,o=e("2877"),c=Object(o["a"])(l,s,i,!1,null,null,null);a["a"]=c.exports},c41f:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[a("div",{staticClass:"wbs-main"},[a("div",{staticClass:"opt-function-hd"},[t._m(0),a("div",{staticClass:"func-desc"},[t._v(" 依赖蜘蛛分析插件，记录搜索引擎爬取404状态URL，以便于站长进行链接重定向。 ")]),a("div",{staticClass:"mt"},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return t.set_active(a)}},model:{value:t.opt.active,callback:function(a){t.$set(t.opt,"active",a)},expression:"opt.active"}}),a("span",{staticClass:"ml ib"},[t._v("功能"+t._s("1"==t.opt.active?"开启":"关闭"))])],1)]),t.isLoaded?a("table",{staticClass:"wbs-form-table"},[a("tbody",[a("tr",[a("th",{staticClass:"w8em"},[t._v("功能选择")]),a("td",{staticClass:"info"},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(a){return t.set_active(a)}},model:{value:t.opt.real_spider,callback:function(a){t.$set(t.opt,"real_spider",a)},expression:"opt.real_spider"}},[t._v("仅监测真实蜘蛛数据（需蜘蛛分析插件Pro版本支持）")]),a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(a){return t.set_active(a)}},model:{value:t.opt.top_site_spider,callback:function(a){t.$set(t.opt,"top_site_spider",a)},expression:"opt.top_site_spider"}},[t._v("仅监测谷歌、百度、必应搜索蜘蛛数据")])],1)])])]):t._e(),t._m(1),a("div",{staticClass:"log-box"},[t.spider_install&&t.spider_active?t._e():a("div",{staticClass:"getpro-mask"},[a("div",{staticClass:"mask-inner"},[t.spider_install?t.spider_active?t._e():a("div",{staticClass:"tips"},[a("p",[t._v("* 当前功能依赖Spider Analyser-蜘蛛分析插件。")]),a("div",{staticClass:"wb-hl mt"},[a("svg",{staticClass:"wb-icon wbsico-notice"},[a("use",{attrs:{"xlink:href":"#wbsico-notice"}})]),a("span",[t._v("检测到未启用，去")]),a("a",{staticClass:"link",attrs:{href:t.admin_url("plugin-install.php?s=Wbolt+Spider+Analyser&tab=search&type=term")}},[t._v("启用")])])]):a("div",{staticClass:"tips"},[a("p",[t._v("* 当前功能依赖Spider Analyser-蜘蛛分析插件。")]),a("div",{staticClass:"wb-hl mt"},[a("svg",{staticClass:"wb-icon wbsico-notice"},[a("use",{attrs:{"xlink:href":"#wbsico-notice"}})]),a("span",[t._v("未检测到安装，去")]),a("a",{staticClass:"link",attrs:{href:t.admin_url("plugin-install.php?s=Wbolt+Spider+Analyser&tab=search&type=term")}},[t._v("安装")])])])])]),a("el-table",{staticClass:"wbs-table mt",staticStyle:{width:"100%"},attrs:{data:t.url_404},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",name:"id",width:"55"}}),a("el-table-column",{attrs:{label:"URL地址","class-name":"w35"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"url",attrs:{"data-label":"URL",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}])}),a("el-table-column",{attrs:{label:"响应码","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"响应码"}},[a("span",[t._v(t._s(e.row.code))])])]}}])}),a("el-table-column",{attrs:{label:"反馈蜘蛛","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"反馈蜘蛛"}},[a("span",[t._v(t._s(e.row.spider))])])]}}])}),a("el-table-column",{attrs:{label:"访问时间","class-name":"w15"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"访问时间"}},[a("span",[t._v(t._s(e.row.visit_date))])])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"success"},on:{click:function(a){return t.refresh_404(e.row)}}},[t._v("刷新")]),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return t.remove_404(e.row)}}},[t._v("忽略")])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.url_404.length>0,expression:"url_404.length > 0"}],staticClass:"btns-bar with-ctrl-area"},[a("div",{staticClass:"wb-ctrl-area"},[a("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.batch_op,callback:function(a){t.batch_op=a},expression:"batch_op"}},[a("el-option",{attrs:{label:"批量刷新",value:"check"}}),a("el-option",{attrs:{label:"批量忽略",value:"del"}})],1),a("el-button",{staticClass:"ml-s",attrs:{type:"info",plain:"",size:"small"},on:{click:t.batch_apply}},[t._v("应用")])],1),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":30,total:1*t.total,"current-page":t.page},on:{"current-change":t.nav_page}})],1),a("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),t.$cnf.is_pro?t._e():a("wbs-more-sources",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}]})],1)])},i=[function(){var t=this,a=t._self._c;return a("h3",{staticClass:"func-name"},[a("strong",[t._v("404监测")])])},function(){var t=this,a=t._self._c;return a("h3",{staticClass:"sc-title-sub"},[a("span",[t._v("404 URL")])])}],n=e("8856"),l={name:"UrlMonitor",components:{"wbs-custom-links":n["a"]},data(){const t=this;return{isLoaded:!1,formChanged:1,is_pro:t.$cnf.is_pro,opt:{},cnf:{},spider_install:0,spider_active:0,total:0,page:1,page_num:20,url_404:[],multipleSelection:[],batch_op:""}},created(){const t=this;t.getData()},methods:{handleSelectionChange(t){this.multipleSelection=t},batch_apply(){const t=this;if(!t.batch_op)return!1;if(t.multipleSelection.length<1)return t.$wbui.toast("未选择项目"),!1;if("del"==t.batch_op){let a=[];if(t.multipleSelection.forEach((function(t){a.push(t.id)})),a.length<1)return;t.$wbui.confirm("确认忽略所选链接？",()=>{let e=t.$wbui.toast("执行中...",{time:180});t.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"remove_404",id:a}).then(a=>{t.$wbui.close(e),t.$wbui.toast("已忽略所选链接"),t.page=1,t.load_data()})})}else if("check"==t.batch_op){let a=[];if(t.multipleSelection.forEach((function(t){a.push(t.id)})),a.length<1)return;let e=t.$wbui.toast("检测中...",{time:180});t.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"refresh_404",id:a}).then(a=>{t.$wbui.close(e),t.$wbui.toast("已全部检测状态"),t.load_data()})}return!1},set_active(){const t=this;setTimeout(()=>{t.$api.saveData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"update_options",opt:t.opt,key:"url_404"}).then(t=>{})},250)},getData(){const t=this;t.$api.getData({action:t.$cnf.action.act,op:"get_options",key:"url_404",page:t.page}).then(a=>{const e=a.data;t.opt=e.opt,t.cnf=e.cnf,t.total=e.total,t.spider_install=e.spider_install,t.spider_active=e.spider_active,e.spider_install&&e.spider_active&&t.load_data(),t.isLoaded=!0})},load_data(){const t=this;t.$api.fetchData({action:t.$cnf.action.act,op:"404_url",page:t.page}).then(a=>{t.url_404=a.data})},admin_url(t){return this.$cnf.base_url+t},nav_page(t){this.page=t,this.load_data()},remove_404(t){const a=this;return a.$wbui.confirm("确认忽略链接？",()=>{let e=a.$wbui.toast("执行中...",{time:180});a.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:a.$cnf.action.act,op:"remove_404",id:t.id}).then(t=>{a.$wbui.close(e),a.$wbui.toast("已忽略链接"),a.load_data()})}),!1},refresh_404(t){const a=this;let e=a.$wbui.toast("检测中...",{time:180});return a.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:a.$cnf.action.act,op:"refresh_404",id:t.id}).then(t=>{a.$wbui.close(e),a.$wbui.toast("已检测更新完"),a.load_data()}),!1}}},o=l,c=e("2877"),r=Object(c["a"])(o,s,i,!1,null,null,null);a["default"]=r.exports}}]);