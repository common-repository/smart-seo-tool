(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b724b"],{"1fbb":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner",class:{"wb-page-loaded":t.isLoaded}},[a("div",{staticClass:"wbs-main"},[a("div",{staticClass:"opt-function-hd"},[t._m(0),a("div",{staticClass:"func-desc"},[t._v(" 支持因网站改版及URL变动等原因，实现站内链接重定向支持，有利于SEO。 ")]),a("div",{staticClass:"mt"},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return t.set_active(a)}},model:{value:t.opt.active,callback:function(a){t.$set(t.opt,"active",a)},expression:"opt.active"}}),a("span",{staticClass:"ml ib"},[t._v("功能"+t._s("1"==t.opt.active?"开启":"关闭"))])],1)]),a("wbs-filter-bar",[a("el-select",{staticClass:"ctrl-item w8em",attrs:{clearable:"",placeholder:"类型",size:"small"},model:{value:t.q.code,callback:function(a){t.$set(t.q,"code",a)},expression:"q.code"}},t._l({301:"301永久重定向",302:"302临时重定向"},(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1),a("el-select",{staticClass:"ctrl-item w8em",attrs:{clearable:"",filterable:"",placeholder:"状态",size:"small"},model:{value:t.q.status,callback:function(a){t.$set(t.q,"status",a)},expression:"q.status"}},t._l({1:"启用",2:"停用"},(function(t,e){return a("el-option",{key:e,attrs:{filterable:"",label:t,value:e}})})),1),a("el-input",{staticClass:"m-hide ctrl-item wbs-input-short",attrs:{placeholder:"输入关键字",clearable:"",size:"small"},on:{clear:t.doSearch},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.doSearch.apply(null,arguments)}},model:{value:t.q.q,callback:function(a){t.$set(t.q,"q",a)},expression:"q.q"}}),a("el-button",{staticClass:"ctrl-item",attrs:{type:"primary",plain:"",name:"search",size:"small"},on:{click:t.doSearch}},[t._v("筛选")]),t.$cnf.is_pro&&!t.$cnf.is_mobile?a("el-button",{staticClass:"fr",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus"},on:{click:function(a){return t.editRow(0)}}},[t._v("新增")]):t._e()],1),t.$cnf.is_pro&&t.$cnf.is_mobile?a("el-button",{staticClass:"mt wbs-btn-block",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus"},on:{click:function(a){return t.editRow(0)}}},[t._v("新增")]):t._e(),t.isLoaded?a("div",{staticClass:"log-box mt"},[a("el-table",{staticClass:"wbs-table mt",staticStyle:{width:"100%"},attrs:{data:t.dataList},on:{"selection-change":t.handle_selection_change}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"类型","class-name":"w15"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s({301:"301永久重定向",302:"302临时重定向"}[a.row.action_code])+" ")]}}],null,!1,2378173762)}),a("el-table-column",{attrs:{label:"旧URL/规则","class-name":"w25"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"旧URL"}},[a("span",[t._v(t._s(e.row.url))])])]}}],null,!1,2498503066)}),a("el-table-column",{attrs:{label:"新URL/规则","class-name":"w20"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"新URL"}},[a("span",[t._v(t._s(e.row.action_data))])])]}}],null,!1,898912343)}),a("el-table-column",{attrs:{label:"状态","class-name":"w10"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{attrs:{"data-label":"状态"}},[a("span",[t._v(t._s({1:"启用",2:"停用"}[e.row.status]))])])]}}],null,!1,2677530018)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return t.delRow(e.row)}}},[t._v("删除")]),a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.editRow(e.row.id)}}},[t._v("编辑")]),1==e.row.status?a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.setStatus(e.row,2)}}},[t._v("停用")]):t._e(),2==e.row.status?a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.setStatus(e.row,1)}}},[t._v("启用")]):t._e()]}}],null,!1,850331214)})],1),t.dataList.length>0?a("div",{staticClass:"btns-bar with-ctrl-area mt"},[a("div",{staticClass:"wb-ctrl-area"},[a("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.batch_op,callback:function(a){t.batch_op=a},expression:"batch_op"}},[a("el-option",{attrs:{label:"启用",value:"on"}}),a("el-option",{attrs:{label:"停用",value:"off"}}),a("el-option",{attrs:{label:"删除",value:"del"}})],1),a("el-button",{staticClass:"ml-s",attrs:{type:"info",plain:"",size:"small"},on:{click:t.batch_apply}},[t._v("应用")])],1),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":1*t.page_num,total:1*t.record_total},on:{"current-change":t.nav_page}})],1):t._e(),t.$cnf.is_pro?t._e():a("div",{staticClass:"getpro-mask"},[a("div",{staticClass:"mask-inner"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.doActivePro()}}},[t._v("获取PRO版本")]),a("p",{staticClass:"tips"},[t._v("* 激活PRO版本即可使用")])],1)])],1):t._e(),a("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"}),t.$cnf.is_pro?t._e():a("wbs-more-sources",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}]})],1)])},s=[function(){var t=this,a=t._self._c;return a("h3",{staticClass:"func-name"},[a("strong",[t._v("重定向")])])}],n={name:"UrlRedirect",components:{},data(){return{formChanged:0,isLoaded:!1,opt:{active:"0"},cnf:{},q:{code:"",status:"",q:""},page:1,page_num:20,record_total:0,dataList:[],batch_op:"",multipleSelection:[],viewAllOption:0}},created(){const t=this;t.$verify((a,e)=>{t.$cnf.is_pro=a,a&&e&&e.param&&e.param.action&&(t.$cnf.action.act=e.param.action),a?(t.getData(),t.$isPrdActive(t.$WB)):t.isLoaded=!0}),t.getCnf()},methods:{doSearch(){const t=this;t.page=1,t.load_data()},editRow(t){this.$router.push({path:"/url-redirection-detail",query:{id:t}})},set_active(){const t=this;setTimeout(()=>{t.$api.saveData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"update_options",opt:t.opt,key:"redirection"}).then(t=>{})},250)},getCnf(){const t=this;t.$api.getData({action:t.$cnf.action.act,op:"get_options",key:"redirection"}).then(a=>{const e=a.data;t.opt=e.opt})},getData(){const t=this;t.$api.getData({action:t.$cnf.action.act,op:"redirection-list",page:1,num:t.page_num}).then(a=>{t.dataList=a.data,t.record_total=a.total,t.isLoaded=!0})},load_data(){const t=this;t.$api.getData({action:t.$cnf.action.act,op:"redirection-list",page:t.page,q:t.q}).then(a=>{t.dataList=a.data,t.record_total=a.total})},nav_page(t){this.page=t,this.load_data()},switch_tab(t){const a=this;a.type=t,a.page=1,a.load_data()},handle_selection_change(t){this.multipleSelection=t},batch_apply(){const t=this;if(!t.batch_op)return!1;if(t.multipleSelection.length<1)return t.$wbui.toast("未选择项目"),!1;let a=[];if(t.multipleSelection.forEach((function(t){a.push(t.id)})),!(a.length<1))if("on"==t.batch_op)t.$wbui.confirm("所选链接确认设置为启用？",()=>{let e=t.$wbui.toast("执行中...",{time:180});t.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"redirection-state",type:"on",ids:a.join(",")}).then(a=>{t.$wbui.close(e),t.$wbui.toast("更新完毕"),t.load_data()})});else if("off"==t.batch_op){let e=t.$wbui.toast("执行中...",{time:180});t.$wbui.confirm("所选链接确认设置为停用？",()=>{t.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"redirection-state",type:"off",ids:a.join(",")}).then(a=>{t.$wbui.close(e),t.$wbui.toast("更新完毕"),t.load_data()})})}else if("del"==t.batch_op){const e=t.$wbui.toast("执行中...",{time:180});t.$wbui.confirm("确认删除所选链接？",()=>{t.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:t.$cnf.action.act,op:"redirection-state",type:"del",ids:a.join(",")}).then(a=>{t.$wbui.close(e),t.$wbui.toast("删除完毕"),t.page=1,t.load_data()})})}},delRow(t){const a=this;return a.$wbui.confirm("确认删除链接？",()=>{a.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:a.$cnf.action.act,op:"redirection-state",type:"del",ids:t.id}).then(t=>{a.$wbui.toast("删除完毕"),a.page=1,a.load_data()})}),!1},setStatus(t,a){const e=this;let i=1==a?"on":"off";return e.$wbui.confirm("确认更新状态？",()=>{e.$api.getData({_ajax_nonce:_wb_sst_ajax_nonce||"",action:e.$cnf.action.act,op:"redirection-state",type:i,ids:t.id}).then(t=>{e.$wbui.toast("更新完毕"),e.load_data()})}),!1}}},o=n,l=e("2877"),c=Object(l["a"])(o,i,s,!1,null,null,null);a["default"]=c.exports}}]);